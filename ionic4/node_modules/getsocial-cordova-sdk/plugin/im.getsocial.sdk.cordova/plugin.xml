<?xml version="1.0" encoding="utf-8"?>
<plugin xmlns="http://www.phonegap.com/ns/plugins/1.0"
        id="im.getsocial.sdk.cordova"
        version="1.0.3">

  <name>GetSocialSdk</name>

  <engines>
    <engine name="cordova" version=">=3.4.0"/>
  </engines>

  <!-- <preference name="APP_ID"/>
  <preference name="APP_NAME"/>
  <preference name="GOOGLE_APP_ID" /> -->

  <!-- <asset src="www/getsocial.js" target="js/getsocial.js"/> -->

  <js-module src="www/GetSocial.js" name="GetSocial">
    <clobbers target="GetSocial" />
  </js-module>
  <js-module src="www/Configuration.js" name="Configuration">
    <clobbers target="GetSocial.Configuration" />
  </js-module>
  <js-module src="www/plugin/InvitePlugin.js" name="InvitePlugin">
    <clobbers target="GetSocial.InvitePlugin" />
  </js-module>
  <js-module src="www/plugin/Plugin.js" name="Plugin">
    <clobbers target="GetSocial.Plugin" />
  </js-module>
  <js-module src="www/SmartInviteViewBuilder.js" name="SmartInviteViewBuilder">
    <clobbers target="GetSocial.SmartInviteViewBuilder" />
  </js-module>
  <js-module src="www/view/ViewBuilder.js" name="ViewBuilder">
    <clobbers target="GetSocial.ViewBuilder" />
  </js-module>
  <js-module src="www/CurrentUser.js" name="CurrentUser">
    <clobbers target="GetSocial.CurrentUser" />
  </js-module>
  <js-module src="www/entity/User.js" name="User">
    <clobbers target="GetSocial.User" />
  </js-module>
  <js-module src="www/ActivitiesViewBuilder.js" name="ActivitiesViewBuilder">
    <clobbers target="GetSocial.ActivitiesViewBuilder" />
  </js-module>
  <js-module src="www/NotificationsViewBuilder.js" name="NotificationsViewBuilder">
    <clobbers target="GetSocial.NotificationsViewBuilder" />
  </js-module>
  <js-module src="www/UserListViewBuilder.js" name="UserListViewBuilder">
    <clobbers target="GetSocial.UserListViewBuilder" />
  </js-module>
  <js-module src="www/chat/GetSocialChat.js" name="GetSocialChat">
    <clobbers target="GetSocialChat" />
  </js-module>
  <js-module src="www/chat/ChatViewBuilder.js" name="ChatViewBuilder">
    <clobbers target="GetSocialChat.ChatViewBuilder" />
  </js-module>
  <js-module src="www/chat/ChatListViewBuilder.js" name="ChatListViewBuilder">
    <clobbers target="GetSocialChat.ChatListViewBuilder" />
  </js-module>
  <js-module src="www/entity/Leaderboard.js" name="Leaderboard">
    <clobbers target="GetSocial.Leaderboard" />
  </js-module>
  <js-module src="www/entity/LeaderboardMetaData.js" name="LeaderboardMetaData">
    <clobbers target="GetSocial.LeaderboardMetaData" />
  </js-module>
  <js-module src="www/entity/LeaderboardScore.js" name="LeaderboardScore">
    <clobbers target="GetSocial.LeaderboardScore" />
  </js-module>


  <!-- <dependency id="com.phonegap.plugins.facebookconnect" url="https://github.com/Telerik-Verified-Plugins/Facebook" /> -->
  <!-- <dependency id="cordova-plugin-facebook4" url="https://github.com/jeduan/cordova-plugin-facebook4" /> -->
  <!-- <dependency id="cordova-plugin-facebook4" url="." subdir="plugin/im.getsocial.sdk.cordova/dependency/cordova-plugin-facebook4" /> -->

  <platform name="android">
    <config-file target="res/xml/config.xml" parent="/*">
      <feature name="GetSocialCordova">
        <param name="android-package" value="im.getsocialsdk.cordova.plugin.GetSocialCordova"/>
        <param name="onload" value="true" />
      </feature>
      <feature name="GetSocialConfiguration">
        <param name="android-package" value="im.getsocialsdk.cordova.plugin.GetSocialConfiguration"/>
      </feature>
      <feature name="GetSocialPluginEvents">
        <param name="android-package" value="im.getsocialsdk.cordova.plugin.GetSocialPluginEvents" />
      </feature>
      <feature name="GetSocialCurrentUser">
        <param name="android-package" value="im.getsocialsdk.cordova.plugin.GetSocialCurrentUser" />
      </feature>
      <feature name="GetSocialChatCordova">
        <param name="android-package" value="im.getsocialsdk.cordova.plugin.GetSocialChatCordova" />
      </feature>
    </config-file>

    <config-file target="AndroidManifest.xml" parent="/*">
      <permission android:name=".gcm.permission.C2D_MESSAGE" android:protectionLevel="signature" />
      <uses-permission android:name=".gcm.permission.C2D_MESSAGE" />
      <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
      <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
      <uses-permission android:name="android.permission.INTERNET" />
      <uses-permission android:name="android.permission.GET_ACCOUNTS" />
      <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    </config-file>

      <!-- <config-file target="res/values/strings.xml" parent="/*">
        <string name="google_services_app_id">$GOOGLE_APP_ID</string>
      </config-file> -->

      <!-- <config-file target="AndroidManifest.xml" parent="application">
        <meta-data
          android:name="com.google.android.gms.games.APP_ID"
          android:value="@string/google_services_app_id"/>
      </config-file> -->
    
    
    <config-file target="AndroidManifest.xml" parent="/manifest/application/activity">
      <intent-filter>
        <action android:name="getsocial.intent.action.NOTIFICATION_RECEIVE" />
        <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
    </config-file>

    <config-file target="AndroidManifest.xml" parent="/manifest/application">
        <receiver android:name="im.getsocial.sdk.core.gms.InstallReferrerReceiver">
            <intent-filter>
                <action android:name="com.android.vending.INSTALL_REFERRER"/>
            </intent-filter>
        </receiver>
        <receiver
            android:name="im.getsocial.sdk.core.GetSocialReceiver"
            android:permission="com.google.android.c2dm.permission.SEND">
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
                <action android:name="com.google.android.c2dm.intent.RECEIVE"/>

                <category android:name=".gcm"/>
            </intent-filter>
            <intent-filter>
                <action android:name="im.getsocial.sdk.intent.RECEIVE"/>

                <data android:scheme="getSocialNotificationId"/>
            </intent-filter>
        </receiver>
        <provider
            android:name="im.getsocial.sdk.core.provider.ImageContentProvider"
            android:authorities="${applicationId}.smartinvite.images.provider"
            android:exported="true"/>
    </config-file>
    <config-file target="AndroidManifest.xml" parent="/manifest">
        <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="23"/>
    </config-file>

    <config-file target="AndroidManifest.xml" parent="/manifest/application">
        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version"/>
    </config-file>

    <source-file src="src/android/GetSocialCordova.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>
    <source-file src="src/android/GetSocialConfiguration.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>
    <source-file src="src/android/GetSocialPluginEvents.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>
    <source-file src="src/android/GetSocialPluginProxy.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>
    <source-file src="src/android/GetSocialUtil.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>
    <source-file src="src/android/GetSocialCurrentUser.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>
    <source-file src="src/android/GetSocialChatCordova.java" target-dir="src/im/getsocialsdk/cordova/plugin/"/>

    <source-file src="lib/getsocial-android-sdk-core.jar" target-dir="libs" framework="true" />
    <source-file src="lib/getsocial-android-sdk-chat.jar" target-dir="libs" framework="true" />

    <framework src="scripts/gradle/GetSocialSDK.gradle" custom="true" type="gradleReference"/>

  </platform>

  <platform name="ios">
    <config-file target="config.xml" parent="/widget">
      <feature name="GetSocialCordova">
        <param name="ios-package" value="GetSocialCordova" />
      </feature>
      <feature name="GetSocialPluginEvents">
        <param name="ios-package" value="GetSocialPluginEvents" />
      </feature>
      <feature name="GetSocialConfiguration">
        <param name="ios-package" value="GetSocialConfig" />
      </feature>
      <feature name="GetSocialCurrentUser">
        <param name="ios-package" value="GetSocialCurrentUserCordova" />
      </feature>
      <feature name="GetSocialChatCordova">
        <param name="ios-package" value="GetSocialChatCordova" />
      </feature>
    </config-file>

    <config-file target="*-Info.plist" parent="LSApplicationQueriesSchemes">
      <array>
        <string>kik-share</string>
        <string>whatsapp</string>
        <string>kakaolink</string>
        <string>fbapi</string>
        <string>fb-messenger-api</string>
        <string>fbauth2</string>
        <string>fbshareextension</string>
        <string>line</string>
      </array>
    </config-file>


    <header-file src="src/ios/CDVPlugin+ResultMethods.h"/>
    <source-file src="src/ios/CDVPlugin+ResultMethods.m"/>
    <header-file src="src/ios/GetSocialCordova.h"/>
    <source-file src="src/ios/GetSocialCordova.m"/>
    <header-file src="src/ios/GetSocialConfig.h"/>
    <source-file src="src/ios/GetSocialConfig.m"/>
    <header-file src="src/ios/GetSocialPluginEvents.h"/>
    <source-file src="src/ios/GetSocialPluginEvents.m"/>
    <header-file src="src/ios/GetSocialPluginProxy.h"/>
    <source-file src="src/ios/GetSocialPluginProxy.m"/>
    <header-file src="src/ios/GetSocialCurrentUserCordova.h"/>
    <source-file src="src/ios/GetSocialCurrentUserCordova.m"/>
    <header-file src="src/ios/GetSocialChatCordova.h"/>
    <source-file src="src/ios/GetSocialChatCordova.m"/>
    <header-file src="src/ios/GetSocialUser+Serialize.h"/>
    <source-file src="src/ios/GetSocialUser+Serialize.m"/>
    <header-file src="src/ios/GetSocialLeaderboard+Serialize.h"/>
    <source-file src="src/ios/GetSocialLeaderboard+Serialize.m"/>
    <header-file src="src/ios/GetSocialLeaderboardMetaData+Serialize.h"/>
    <source-file src="src/ios/GetSocialLeaderboardMetaData+Serialize.m"/>
    <header-file src="src/ios/GetSocialLeaderboardScore+Serialize.h"/>
    <source-file src="src/ios/GetSocialLeaderboardScore+Serialize.m"/>
    
    <resource-file src="lib/GetSocial.embeddedframework/Resources/GetSocial.bundle"/>
    <resource-file src="lib/GetSocialChat.embeddedframework/Resources/GetSocialChat.bundle"/>

    <!-- System frameworks -->
    <framework src="Accelerate.framework"/>
    <framework src="AdSupport.framework"/>
    <framework src="AudioToolbox.framework"/>
    <framework src="AVFoundation.framework"/>
    <framework src="CoreImage.framework"/>
    <framework src="CoreLocation.framework"/>
    <framework src="CoreMedia.framework"/>
    <framework src="CoreTelephony.framework"/>
    <framework src="CoreText.framework"/>
    <framework src="MessageUI.framework"/>
    <framework src="CFNetwork.framework"/>
    <framework src="MobileCoreServices.framework"/>
    <framework src="Security.framework"/>
    <framework src="Social.framework"/>
    <framework src="SystemConfiguration.framework"/>
    <framework src="QuartzCore.framework"/>
    <framework src="libiconv.tbd"/>
    <framework src="libresolv.tbd"/>
    <framework src="libsqlite3.tbd"/>
    <framework src="libxml2.tbd"/>
    <framework src="libz.tbd"/>
    <framework src="libicucore.tbd"/>
    <framework src="lib/GetSocial.embeddedframework/GetSocial.framework" custom="true" />
    <framework src="lib/GetSocialChat.embeddedframework/GetSocialChat.framework" custom="true" />

    <hook type="after_plugin_install" src="scripts/fixSymlinks.js"/>
  </platform>

</plugin>