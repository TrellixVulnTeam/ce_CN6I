<!DOCTYPE html>

<html>
<head>
  <title>CurrentUser.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>CurrentUser.js</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="ActivitiesViewBuilder.html">
                    ActivitiesViewBuilder.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="Configuration.html">
                    Configuration.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="CurrentUser.html">
                    CurrentUser.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="GetSocial.html">
                    GetSocial.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="NotificationsViewBuilder.html">
                    NotificationsViewBuilder.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="SmartInviteViewBuilder.html">
                    SmartInviteViewBuilder.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="UserListViewBuilder.html">
                    UserListViewBuilder.js
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        
        
          <div class='highlight'><pre><span class="hljs-comment">/*
 *      Copyright 2015-2016 GetSocial B.V.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */</span>

  <span class="hljs-keyword">var</span> User = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./User'</span>)

  <span class="hljs-keyword">var</span> NATIVE_BRIDGE_NAME = <span class="hljs-string">"GetSocialCurrentUser"</span>;

  <span class="hljs-keyword">var</span> CurrentUser = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
    User.call(<span class="hljs-keyword">this</span>, serializedUser);

    <span class="hljs-keyword">this</span>.onErrorPlugin = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
        <span class="hljs-built_in">console</span>.log(err);
    }

    <span class="hljs-keyword">this</span>.onSerializeDataReceive = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
      <span class="hljs-keyword">this</span>.deserialize(<span class="hljs-built_in">JSON</span>.parse(data));
    }
  }

  CurrentUser.prototype.resolveUserIdentityConflict = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolution, onSuccess, onFailure</span>) </span>{
    cordova.exec(onSuccess, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"resolveUserIdentityConflict"</span>, [resolution]);
  }

  CurrentUser.prototype.setDisplayName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">displayName, onSuccess, onFailure</span>) </span>{
        <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
        cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
            scope.onSerializeDataReceive(serializedUser);
            onSuccess(scope.displayName());
        }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"setDisplayName"</span>, [displayName]);
  }

  CurrentUser.prototype.setAvatarUrl = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">avatarUrl, onSuccess, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
              scope.onSerializeDataReceive(serializedUser);
              onSuccess(scope.avatarUrl());
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"setAvatarUrl"</span>, [avatarUrl]);
  }

  CurrentUser.prototype.addFbUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">token, onSuccess, onConflict, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
              <span class="hljs-keyword">if</span>(data.isConflict) {
                onConflict();
              } <span class="hljs-keyword">else</span> {
                scope.onSerializeDataReceive(data.serializedUser);
                onSuccess(scope, data.resolveStatus);
              }
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"addFbUserIdentity"</span>, [token]);
  }

  CurrentUser.prototype.addGooglePlusUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">token, onSuccess, onConflict, onFailure</span>) </span>{
            <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
            cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                <span class="hljs-keyword">if</span>(data.isConflict) {
                  onConflict();
                } <span class="hljs-keyword">else</span> {
                  scope.onSerializeDataReceive(data.serializedUser);
                  onSuccess(scope, data.resolveStatus);
                }
            }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"addGooglePlusUserIdentity"</span>, [token]);
  }

  CurrentUser.prototype.addGooglePlayUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">token, onSuccess, onConflict, onFailure</span>) </span>{
              <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
              cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                  <span class="hljs-keyword">if</span>(data.isConflict) {
                    onConflict();
                  } <span class="hljs-keyword">else</span> {
                    scope.onSerializeDataReceive(data.serializedUser);
                    onSuccess(scope, data.resolveStatus);
                  }
              }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"addGooglePlayUserIdentity"</span>, [token]);
  }

  CurrentUser.prototype.addUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">userId, token, onSuccess, onConflict, onFailure</span>) </span>{
                <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
                cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                    <span class="hljs-keyword">if</span>(data.isConflict) {
                      onConflict();
                    } <span class="hljs-keyword">else</span> {
                      scope.onSerializeDataReceive(data.serializedUser);
                      onSuccess(scope, data.resolveStatus);
                    }
                }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"addUserIdentity"</span>, [userId, token]);
  }

  CurrentUser.prototype.removeFbUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">onSuccess, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
              scope.onSerializeDataReceive(serializedUser);
              onSuccess(scope);
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"removeFbUserIdentity"</span>, []);
  }

  CurrentUser.prototype.removeGooglePlusUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">onSuccess, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
              scope.onSerializeDataReceive(serializedUser);
              onSuccess(scope);
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"removeGooglePlusUserIdentity"</span>, []);
  }

  CurrentUser.prototype.removeGooglePlayUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">onSuccess, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
              scope.onSerializeDataReceive(serializedUser);
              onSuccess(scope);
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"removeGooglePlayUserIdentity"</span>, []);
  }

  CurrentUser.prototype.removeUserIdentity = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">providerId, onSuccess, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
              scope.onSerializeDataReceive(serializedUser);
              onSuccess(scope);
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"removeUserIdentity"</span>, [providerId]);
  }

  CurrentUser.prototype.reset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">onSuccess, onFailure</span>) </span>{
          <span class="hljs-keyword">var</span> scope = <span class="hljs-keyword">this</span>;
          cordova.exec(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">serializedUser</span>) </span>{
              scope.onSerializeDataReceive(serializedUser);
              onSuccess(scope);
          }, onFailure, NATIVE_BRIDGE_NAME, <span class="hljs-string">"reset"</span>, []);
  }

  CurrentUser.prototype.__proto__ = User.prototype;
  CurrentUser.prototype.constructor = CurrentUser;

  <span class="hljs-built_in">module</span>.exports = CurrentUser;</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
