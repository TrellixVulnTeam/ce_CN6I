{"version":3,"sources":["../../src/pages/edit-maintenance/edit-maintenance.module.ts","../../src/pages/edit-maintenance/edit-maintenance.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { EditMaintenancePage } from './edit-maintenance';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EditMaintenancePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(EditMaintenancePage),\r\n  ],\r\n})\r\nexport class EditMaintenancePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-maintenance/edit-maintenance.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\r\nimport { AppProvider } from '../../providers/app/app';\r\nimport { Storage } from '@ionic/storage';\r\nimport { LoginPage } from '../../pages/login/login';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n/**\r\n * Generated class for the EditMaintenancePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-edit-maintenance',\r\n  templateUrl: 'edit-maintenance.html',\r\n})\r\nexport class EditMaintenancePage {\r\n\r\n  public language: string;\r\n  public title: string;\r\n  public delete: string;\r\n\r\n  vehInfo: any;\r\n  maintenances: Array<{\r\n    date_from:string,\r\n    date_to: string, \r\n    location:string,\r\n    desc:string}>;\r\n\r\n  serial_no:string;\r\n  date_from:string[];\r\n  date_to: string[];\r\n  location:string[];\r\n  desc:string[];\r\n  maint: any;\r\n\r\n  private access_token: string;\r\n\r\n  constructor(public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    public appprov:AppProvider,\r\n    private storage: Storage,\r\n    private alertCtrl: AlertController,\r\n    public view:ViewController,\r\n    public _translate: TranslateService) {\r\n      storage.ready().then(() => {\r\n      });\r\n      storage.get('access_token').then((val) => {\r\n        if (val == null){\r\n          console.log(\"No acccess token\");\r\n          this.navCtrl.setRoot(LoginPage);\r\n        }\r\n        else{\r\n          console.log(\"Got access token\");\r\n          this.access_token = val.toString();\r\n          this.vehInfo = this.navParams.get('vehicle');\r\n          console.log(this.vehInfo);\r\n          this.retrieveMaintenance(this.vehInfo.serial_no);\r\n          this.serial_no = this.vehInfo.serial_no;\r\n          this._initializeTranslation();\r\n        }\r\n      });\r\n  } \r\n\r\n  ionViewDidEnter() {\r\n    console.log('ionViewDidLoad EditMaintenancePage');\r\n    this._initializeTranslation();\r\n  }\r\n\r\n  public changeLanguage(): void{\r\n    this._translateLanguage();\r\n  }\r\n  \r\n  private _translateLanguage() : void{\r\n    this._translate.use(this.language);\r\n    this._initializeTranslation();\r\n  }\r\n    \r\n  private _initializeTranslation(): void{\r\n      this.title =  this._translate.instant(\"edit-maintenance.title\");\r\n      this.delete =  this._translate.instant(\"edit-maintenance.delete\");\r\n  }\r\n\r\n\r\n  retrieveMaintenance(serial_no){\r\n    this.appprov.retrieveMaintenance(this.access_token, serial_no).then((res) => {\r\n      let data = JSON.stringify(res);\r\n      data = JSON.parse(data);\r\n      this.maint = res;\r\n      this.date_from = this.maint.date_from;\r\n      this.date_to = this.maint.date_to;\r\n      this.location = this.maint.location;\r\n      this.desc = this.maint.desc;\r\n      this.maintenances = [];\r\n      for(let i = 0; i < this.date_from.length; i++) {\r\n        this.maintenances.push({\r\n          date_from: this.date_from[i],\r\n          date_to: this.date_to[i], \r\n          location:this.location[i],\r\n          desc: this.desc[i], \r\n        });\r\n      }\r\n      }, err=>{\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  close(){\r\n    this.view.dismiss();\r\n  }\r\n\r\n  deleteMaintenance(date_from, date_to, location, desc){\r\n    this.appprov.deleteMaintenance(this.access_token, this.serial_no, date_from, date_to, location, desc).then((res) => {\r\n      let data = JSON.stringify(res);\r\n      data = JSON.parse(data);\r\n      console.log(\"record deleted\");\r\n      this.retrieveMaintenance(this.serial_no);\r\n      }, err=>{\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-maintenance/edit-maintenance.ts"],"sourceRoot":""}